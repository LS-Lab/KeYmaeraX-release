<!-- Open Goal -->
<div class="row">
    <div class="col-md-12" ng-init="goal=proofTree.nodesMap[goalId]">
        <!-- need duplication because 'step.subgoals.length > 0' is non-assignable -->
        <k4-sequent proof-id="proofId" node-id="nodeId" sequent="goal.sequent"
                    read-only="readOnly" collapsed="false"></k4-sequent>
    </div>
</div>
<!-- Conclusion -->
<div class="row k4-proofrow" ng-repeat="stepId in deductionPath">
    <div class="col-md-12 k4-goalwithsiblings" ng-init="step=proofTree.nodesMap[stepId]">
        <k4-sequent proof-id="proofId" node-id="nodeId" sequent="step.sequent"
                    read-only="true" collapsed="true"></k4-sequent>
        <ul>
            <li ng-repeat="sibling in siblingCandidates(step.children)">
                <!-- assumes that only one agenda item mentions a specific node in the proof tree -->
                <!-- todo HTML tooltip would be nice, but couldn't get to work so far -->
                <a ng-init="item=agenda.itemsByProofStep(sibling)[0]" ng-click="agenda.select(item)"
                   tooltip="{{tooltip(proofTree.nodesMap[sibling].sequent)}}" tooltip-trigger
                   tooltip-placement="top">{{item.id}}</a>
            </li>
        </ul>
    </div>
    <ul>
        <li>{{step.rule.name}}</li>
    </ul>
    <!-- add buttons: rewind to here, start alternative proof attempt etc. -->
</div>
<!-- navigation buttons below bottom-most proof row -->
<div class="row" ng-if="(deductionPath.length === 0 && goalId !== proofTree.root) || (deductionPath.length > 0 && deductionPath[deductionPath.length-1] !== proofTree.root)">
    <div class="col-md-12 text-center">
        <small>
            <a ng-click="fetchParent(deductionPath[deductionPath.length-1])"
               ng-if="deductionPath.length > 0"><span class="fa fa-angle-down"> Parent</span></a>
            <a ng-click="fetchParent(goalId)"
               ng-if="deductionPath.length <= 0"><span class="fa fa-angle-down"> Parent</span></a>
            <a><span class="fa fa-code-fork"> Branching point</span></a>
            <a><span class="fa fa-angle-double-down"> Expand all</span></a>
        </small>
    </div>
</div>
<!-- failed attempt on HTML tooltip -->
<!--<script type="text/ng-template" id="sequentTooltipHtml">-->
    <!--<span><small>{{tooltip(proofTree.nodesMap[sibling].sequent)}}</small></span>-->
<!--</script>-->
